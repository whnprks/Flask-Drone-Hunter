<!-- /*
* Template Name: Learner
* Template Author: Untree.co
* Tempalte URI: https://untree.co/
* License: https://creativecommons.org/licenses/by/3.0/
*/ -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="author" content="Untree.co" />
    <link
      rel="shortcut icon"
      href="{{ url_for('static', filename='images/sapta.png') }}"
    />
    <meta name="description" content="" />
    <meta name="keywords" content="bootstrap, bootstrap4" />
    <link
      href="https://fonts.googleapis.com/css2?family=Display+Playfair:wght@400;700&family=Inter:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://unicons.iconscout.com/release/v4.0.0/css/line.css"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/bootstrap.min.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='fonts/icomoon/style.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/aos.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.20/dist/sweetalert2.min.css"
    />
    <title>Drone Hunter</title>
  </head>

  <body>
    <div class="site-mobile-menu">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close">
          <span class="icofont-close js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div>

    <nav class="site-nav mb-5">
      <div class="pb-2 top-bar mb-3">
        <div class="container">
          <div class="row align-text-left">
            <div class="col-6 col-lg-8">
              <img
                class="gambar"
                src="{{ url_for('static', filename='images/saptafull.png') }}"
                alt=""
              />
            </div>
            <div class="col-6 col-lg-4 text-right">
              <a href="/home" class="small mr-3">
                <span></span>
                Home
              </a>
              <a href="/sign-up" class="small mr-3"> Configuration </a>
              <a href="#" class="small mr-3" id="logout">
                <span class="icon-lock"></span>
                Log Out
              </a>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <div
      class="untree_co-hero overlay"
      style="background-image: url('{{ url_for('static', filename='images/jammer.jpg') }}');"
    >
      <div class="container">
        <div
          class="row align-items-center justify-content-center"
          data-aos="fade-up"
          data-aos-delay="300"
        >
          <div class="col-12">
            <div class="row justify-content-center"></div>
            <div class="untree_co-section">
              <div class="row align-items-stretch justify-content-center">
                <table id="data-table" class="table">
                  <thead class="table-dark">
                    <tr>
                      <th>No</th>
                      <th>Lokasi</th>
                      <th>IP Address</th>
                      <th>Setting</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for camera in cameras %}
                    <tr>
                      <td>{{ camera.id }}</td>
                      <td>{{ camera.lokasi }}</td>
                      <td>{{ camera.ipcam }}</td>
                      <td>
                        <button
                          class="btn btn-danger btn-sm"
                          style="margin-right: 5px"
                          id="hapus{{ camera.id }}"
                        >
                          Delete
                        </button>
                        <a href="{{ url_for('views.editCam', id=camera.id) }}">
                          <button class="btn btn-primary btn-sm">Edit</button>
                        </a>
                      </td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="col-sm-2 col-md-6 col-lg-3 mb-4">
            <a
              href="/tambah-cam"
              class="category d-flex justify-content-center align-items-start h-100"
            >
              <div>
                <h3><b>Add Camera</b></h3>
              </div>
            </a>
          </div>
        </div>
        <!-- /.row -->
      </div>
      <!-- /.container -->
    </div>
    <!-- /.untree_co-hero -->
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %}
    <script>
      // Handling flashed messages and displaying alerts using SweetAlert2
      document.addEventListener('DOMContentLoaded', function() {
        {% for category, message in messages %}
          let timerInterval;
          Swal.fire({
            title: "{{ message }}",
            icon: "{{ category }}",
            timer: 2000,
            timerProgressBar: true,
            didOpen: () => {
              const timer = Swal.getPopup().querySelector("b");
              timerInterval = setInterval(() => {
                timer.textContent = `${Swal.getTimerLeft()}`;
              }, 100);
            },
            willClose: () => {
              clearInterval(timerInterval);
            },
          }).then((result) => {
            /* Read more about handling dismissals below */
            if (result.dismiss === Swal.DismissReason.timer) {
              console.log("I was closed by the timer");
            }
          });
        {% endfor %}
      });
    </script>
    {% endif %} {% endwith %}

    <script src="{{ url_for('static', filename='js/aos.js') }}"></script>
    <script src="{{ url_for('static', filename='js/custom.js') }}"></script>
    <script src="{{ url_for('static', filename='js/list.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
      {% for camera in cameras %}
      document.getElementById("hapus{{ camera.id }}").addEventListener("click", function () {
        Swal.fire({
          title: "Delete Camera {{ camera.id }} ?",
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: "#d33",
          cancelButtonColor: "#3085d6",
          confirmButtonText: "Delete !",
        }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = "/hapus-cam?id={{ camera.id }}";
          }
        });
      });
      {% endfor %}
    </script>

    <script>
      document.getElementById("logout").addEventListener("click", function () {
        Swal.fire({
          title: "Are you sure to Logout?",
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: "#d33",
          cancelButtonColor: "#3085d6",
          confirmButtonText: "Logout !",
        }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = "/logout";
          }
        });
      });
    </script>
  </body>
</html>
